{"ast":null,"code":"import _asyncToGenerator from \"C:/SSAFY/workspace/vuejs/happyhouse_final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from \"vue\";\nimport VueAlertify from \"vue-alertify\";\nVue.use(VueAlertify);\nimport http from \"@/api/http.js\";\nexport default {\n  name: \"Login\",\n  methods: {\n    login: function login() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var loginObj, _yield$http$post, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                loginObj = {\n                  userEmail: _this.$store.state.login.userEmail,\n                  userPassword: _this.$store.state.login.userPassword\n                };\n                _context.prev = 1;\n                _context.next = 4;\n                return http.post(\"/login\", loginObj);\n\n              case 4:\n                _yield$http$post = _context.sent;\n                data = _yield$http$post.data;\n                console.log(\"LoginVue: data : \");\n                console.log(data); // isLogin 포함 mutator 호출\n\n                _this.$store.commit(\"SET_LOGIN\", {\n                  isLogin: true,\n                  userName: data.userName,\n                  userProfileImageUrl: data.userProfileImageUrl\n                }); // board 로 이동\n\n\n                _this.$router.push(\"/\");\n\n                _context.next = 17;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(\"LoginVue: error : \");\n                console.log(_context.t0);\n\n                if (_context.t0.response.status == \"404\") {\n                  _this.$alertify.error(\"이메일 또는 비밀번호를 확인하세요.\");\n                } else {\n                  _this.$alertify.error(\"Opps!! 서버에 문제가 발생했습니다.\");\n                }\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 12]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACAA;AAEA;AAEA;EACAC,aADA;EAEAC;IACAC,KADA,mBACA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACAC,QADA,GACA;kBACAC,6CADA;kBAEAC;gBAFA,CADA;gBAAA;gBAAA;gBAAA,OAOAC,6BAPA;;cAAA;gBAAA;gBAOAC,IAPA,oBAOAA,IAPA;gBASAC;gBACAA,kBAVA,CAYA;;gBACA;kBACAC,aADA;kBAEAC,uBAFA;kBAGAC;gBAHA,GAbA,CAkBA;;;gBACA;;gBAnBA;gBAAA;;cAAA;gBAAA;gBAAA;gBAqBAH;gBACAA;;gBACA;kBACA;gBACA,CAFA,MAEA;kBACA;gBACA;;cA3BA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA6BA;EA9BA;AAFA","names":["Vue","name","methods","login","loginObj","userEmail","userPassword","http","data","console","isLogin","userName","userProfileImageUrl"],"sourceRoot":"src/views","sources":["LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2 class=\"mb-3 mt-3\">Login</h2>\r\n    <div class=\"mb-3\">\r\n      <input\r\n        type=\"email\"\r\n        class=\"form-control\"\r\n        v-model=\"$store.state.login.userEmail\"\r\n        placeholder=\"Email\"\r\n      />\r\n    </div>\r\n    <div class=\"mb-3\">\r\n      <input\r\n        type=\"password\"\r\n        class=\"form-control\"\r\n        v-model=\"$store.state.login.userPassword\"\r\n        placeholder=\"Password\"\r\n      />\r\n    </div>\r\n    <div>\r\n      <button @click=\"login\" class=\"btn btn-primary\">로그인</button>\r\n      <router-link to=\"/register\" class=\"btn btn-success float-end\"\r\n        >회원가입</router-link\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport VueAlertify from \"vue-alertify\";\r\nVue.use(VueAlertify);\r\n\r\nimport http from \"@/api/http.js\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  methods: {\r\n    async login() {\r\n      let loginObj = {\r\n        userEmail: this.$store.state.login.userEmail,\r\n        userPassword: this.$store.state.login.userPassword,\r\n      };\r\n\r\n      try {\r\n        let { data } = await http.post(\"/login\", loginObj);\r\n\r\n        console.log(\"LoginVue: data : \");\r\n        console.log(data);\r\n\r\n        // isLogin 포함 mutator 호출\r\n        this.$store.commit(\"SET_LOGIN\", {\r\n          isLogin: true,\r\n          userName: data.userName,\r\n          userProfileImageUrl: data.userProfileImageUrl,\r\n        });\r\n        // board 로 이동\r\n        this.$router.push(\"/\");\r\n      } catch (error) {\r\n        console.log(\"LoginVue: error : \");\r\n        console.log(error);\r\n        if (error.response.status == \"404\") {\r\n          this.$alertify.error(\"이메일 또는 비밀번호를 확인하세요.\");\r\n        } else {\r\n          this.$alertify.error(\"Opps!! 서버에 문제가 발생했습니다.\");\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}